{"version":3,"file":"ng-paste-from-latest.min.js","sources":["ng-paste-from.coffee"],"names":[],"mappings":"CAAA,WAAA,QAAQ,OAAO,kBACb,SAAS,qBACT,oBAAqB,oCACrB,iBAAkB,kCAElB,SAAS,yBACT,IAAK,mBACL,OAAQ,MAER,UAAU,cAAe,kBACzB,SAAU,IACV,OACC,YAAa,IACb,mBAAoB,IACpB,wBAAyB,IACzB,2BAA4B,IAC5B,qBAAsB,IACtB,uBAAwB,IACxB,sBAAuB,IACvB,mBAAoB,KAErB,KAAM,SAAC,OAAQ,eACP,OAAA,OAAA,oBACN,QAAQ,MAAM,kDAEf,OAAO,WAAa,SAAC,OACpB,GAAA,MAAA,IAUA,OAVG,OAAA,MAAA,eAAwB,MAAA,MAAA,cAAA,QAC1B,KAAO,MAAM,cAAc,QAAQ,cAC5B,MAAA,MAAA,eAAwB,MAAA,MAAA,cAAA,eAAsC,MAAA,MAAA,cAAA,cAAA,QACrE,KAAO,MAAM,cAAc,cAAc,QAAQ,cAC1C,MAAA,OAAA,eAAyB,MAAA,OAAA,cAAA,UAChC,KAAO,OAAO,cAAc,QAAQ,SAEM,kBAAxC,QAAc,yBAChB,KAAO,OAAO,uBAAuB,OACtC,OAAO,iBAAiB,OACxB,OAAA,KAAA,OAAA,sBAAA,MAAiC,GAChC,MAAM,iBADP,QAGD,OAAO,YAAc,WACpB,GAAA,MAAA,IAAA,QAAA,OAAA,KAAA,OAAA,sBAAA,MAAiC,GAChC,QAAQ,IAAI,KAEZ,KAAO,QAAQ,MAC4B,kBAAxC,QAAc,yBAChB,KAAO,OAAO,uBAAuB,OACtC,OAAO,iBAAiB,QAE1B,QAAQ,GAAG,QAAS,OAAO,YAC3B,QAAQ,GAAG,QAAS,OAAO,aAC3B,QAAQ,GAAG,SAAU,OAAO,cAE7B,WAAY,SAAC,OAAQ,QAAS,kBAAmB,6BAChD,QAAO,gBAAkB,SAAC,SACzB,GAAA,QAAA,OAAA,MAAA,IAAA,GAAA,IAEA,KAFA,OACA,OAAS,OAAO,mBAChB,MAAA,GAAA,EAAA,KAAA,QAAA,OAAA,KAAA,GAAA,QAAA,yBACC,IAAI,OAAO,QAAU,aACtB,MAED,OAAO,yBAA2B,WACjC,MAAuC,gBAApC,QAAc,mBAChB,OAAO,mBAEP,OAAO,mBAAmB,QAE5B,OAAO,iBAAmB,SAAC,MAC1B,GAAA,SAAA,sBAAA,MAAA,OAAA,IAAA,QAAA,UAAA,KAAA,GAAA,KAAA,KAAA,KAAA,IAAQ,MAAS,KAAK,OAAtB,CAOA,IAJA,KAAO,KAAK,MAAL,OAAA,KAAA,OAAA,yBAAA,KAA4C,sBAAsB,KACzE,UACA,sBAAwB,OAAO,2BAE/B,MAAA,GAAA,EAAA,KAAA,KAAA,OAAA,KAAA,GAAA,QAAA,mBACW,KAAP,MAGH,QAAU,IAAI,MAAJ,OAAA,MAAA,OAAA,4BAAA,MAA8C,sBAAsB,QAE9E,SACC,MAAO,MACP,OAAQ,IACR,eAAgB,sBAChB,aAAc,QAAQ,QAEpB,QAAQ,SAAY,uBAMtB,UADsC,gBAApC,QAAc,mBACJ,QAEA,OAAO,gBAAgB,SAEQ,kBAAzC,QAAc,uBAAyC,OAAO,sBAAsB,UAAW,SACjG,OAAO,KAAK,WAC+B,kBAApC,QAAc,oBACrB,OAAO,mBAAmB,kBAAkB,iBAAkB,UAZvB,kBAApC,QAAc,oBAChB,OAAO,mBAAmB,kBAAkB,oBAAqB,gBAapE,QAAO,OAAO,iBACb,QAAO,YAAc","sourcesContent":["angular.module \"ngPasteFrom\", []\n\t.constant \"ngPasteFromErrors\",\n\t\tinvalidColumnLength: \"NGPASTEFROM_INVALID_COLUMN_LENGTH\"\n\t\tfailedValidation: \"NGPASTEFROM_FAILED_VALIDATION\"\n\n\t.constant \"ngPasteFromSeparators\",\n\t\trow: /\\r\\n|\\n\\r|\\n|\\r/g\n\t\tcolumn: \"\\t\"\n\n\t.directive \"ngPasteFrom\", ->\n\t\trestrict: \"A\"\n\t\tscope: \n\t\t\tngPasteFrom: \"=\"\n\t\t\tngPasteFromColumns: \"=\"\n\t\t\tngPasteFromRowSeparator: \"=\"\n\t\t\tngPasteFromColumnSeparator: \"=\"\n\t\t\tngPasteFromPasteOnly: \"=\"\n\t\t\tngPasteFromBeforeParse: \"=\"\n\t\t\tngPasteFromOnValidate: \"=\"\n\t\t\tngPasteFromOnError: \"=\"\n\n\t\tlink: ($scope, element, attrs) ->\n\t\t\tif not $scope.ngPasteFromColumns?\n\t\t\t\tconsole.error \"Missing required attribute ngPasteFromColumns.\"\n\n\t\t\t$scope.pasteEvent = (event) ->\n\t\t\t\tif event.clipboardData? && event.clipboardData.getData? # Standard\n\t\t\t\t\tdata = event.clipboardData.getData \"text/plain\"\n\t\t\t\telse if event.originalEvent? && event.originalEvent.clipboardData? && event.originalEvent.clipboardData.getData? # jQuery\n\t\t\t\t\tdata = event.originalEvent.clipboardData.getData \"text/plain\"\n\t\t\t\telse if window.clipboardData? && window.clipboardData.getData? # Internet Explorer\n\t\t\t\t\tdata = window.clipboardData.getData \"Text\"\n\n\t\t\t\tif typeof $scope.ngPasteFromBeforeParse is \"function\"\n\t\t\t\t\tdata = $scope.ngPasteFromBeforeParse data\n\t\t\t\t$scope.processPasteData data\n\t\t\t\tif $scope.ngPasteFromPasteOnly ? true\n\t\t\t\t\tevent.preventDefault()\n\n\t\t\t$scope.changeEvent = ->\n\t\t\t\tif $scope.ngPasteFromPasteOnly ? true\n\t\t\t\t\telement.val \"\"\n\t\t\t\telse\n\t\t\t\t\tdata = element.val()\n\t\t\t\t\tif typeof $scope.ngPasteFromBeforeParse is \"function\"\n\t\t\t\t\t\tdata = $scope.ngPasteFromBeforeParse data\n\t\t\t\t\t$scope.processPasteData data\n\n\t\t\telement.on \"paste\", $scope.pasteEvent\n\t\t\telement.on \"keyup\", $scope.changeEvent\n\t\t\telement.on \"change\", $scope.changeEvent\n\n\t\tcontroller: ($scope, $filter, ngPasteFromErrors, ngPasteFromSeparators) ->\n\t\t\t$scope.columnsToObject = (columns) ->\n\t\t\t\tobj = {}\n\t\t\t\tformat = $scope.ngPasteFromColumns\n\t\t\t\tfor column, index in columns\n\t\t\t\t\tobj[format[index]] = column\n\t\t\t\tobj\n\n\t\t\t$scope.getExpectedColumnsLength = ->\n\t\t\t\tif typeof $scope.ngPasteFromColumns is \"number\"\n\t\t\t\t\t$scope.ngPasteFromColumns\n\t\t\t\telse\n\t\t\t\t\t$scope.ngPasteFromColumns.length\n\n\t\t\t$scope.processPasteData = (data) ->\n\t\t\t\tif not (data and data.length)\n\t\t\t\t\treturn\n\n\t\t\t\trows = data.split $scope.ngPasteFromRowSeparator ? ngPasteFromSeparators.row\n\t\t\t\tresult = []\n\t\t\t\texpectedColumnsLength = $scope.getExpectedColumnsLength()\n\n\t\t\t\tfor row, index in rows\n\t\t\t\t\tif row is \"\"\n\t\t\t\t\t\tcontinue\n\n\t\t\t\t\tcolumns = row.split $scope.ngPasteFromColumnSeparator ? ngPasteFromSeparators.column\n\n\t\t\t\t\trowData =\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t\tsource: row\n\t\t\t\t\t\texpectedLength: expectedColumnsLength\n\t\t\t\t\t\tactualLength: columns.length\n\n\t\t\t\t\tif columns.length isnt expectedColumnsLength\n\t\t\t\t\t\tif typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.invalidColumnLength, rowData\n\t\t\t\t\t\tcontinue\n\n\t\t\t\t\tif typeof $scope.ngPasteFromColumns is \"number\"\n\t\t\t\t\t\trowResult = columns\n\t\t\t\t\telse\n\t\t\t\t\t\trowResult = $scope.columnsToObject columns\n\n\t\t\t\t\tif typeof $scope.ngPasteFromOnValidate isnt \"function\" or $scope.ngPasteFromOnValidate rowResult, rowData\n\t\t\t\t\t\tresult.push rowResult\n\t\t\t\t\telse if typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.failedValidation, rowData\n\n\t\t\t\t$scope.$apply ->\n\t\t\t\t\t$scope.ngPasteFrom = result\n"],"sourceRoot":"/source/"}