{"version":3,"file":"ng-paste-from-latest.min.js","sources":["ng-paste-from.coffee"],"names":[],"mappings":"CAAA,WAAA,QAAQ,OAAO,kBACb,SAAS,qBACT,oBAAqB,oCACrB,iBAAkB,kCAElB,UAAU,cAAe,kBACzB,SAAU,IACV,OACC,YAAa,IACb,kBAAmB,IACnB,mBAAoB,IACpB,sBAAuB,IACvB,mBAAoB,KAErB,KAAM,SAAC,OAAQ,eACP,OAAA,OAAA,mBACN,QAAQ,MAAM,iDAEf,QAAQ,GAAG,QAAS,OAAO,YAC3B,QAAQ,GAAG,QAAS,OAAO,yBAC3B,QAAQ,GAAG,SAAU,OAAO,0BAE7B,WAAY,SAAC,OAAQ,QAAS,kBAAmB,UAChD,GAAA,iBAAA,iBAAA,eAAA,kBAAA,aAAc,SAAC,MACd,GAAA,YAAA,wBAAA,mBAAoB,mBACpB,WAAa,KACb,KAAK,QAAQ,kBAAmB,YAAY,MAAM,aAEnD,eAAiB,SAAC,KACjB,GAAA,qBAAA,eAAgB,IAChB,IAAI,MAAM,gBAEX,gBAAkB,SAAC,SAClB,GAAA,QAAA,OAAA,MAAA,IAAA,GAAA,IAEA,KAFA,OACA,OAAS,OAAO,kBAChB,MAAA,GAAA,EAAA,KAAA,QAAA,OAAA,KAAA,GAAA,QAAA,yBACC,IAAI,OAAO,QAAU,aACtB,MAED,iBAAmB,SAAC,MACnB,GAAA,SAAA,MAAA,IAAA,OAAA,IAAA,KAAA,GAAA,IAAA,IAAQ,MAAS,KAAK,OAAtB,CAMA,IAHA,KAAO,YAAY,MACnB,UAEA,MAAA,GAAA,EAAA,KAAA,KAAA,OAAA,KAAA,GAAA,QAAA,mBACC,QAAU,eAAe,KAEtB,QAAQ,SAAY,OAAO,kBAAkB,QAKhD,IAAM,gBAAgB,SAEsB,kBAAzC,QAAc,uBAAyC,OAAO,sBAAsB,IAAK,OAC3F,OAAO,KAAK,KAC+B,kBAApC,QAAc,oBACrB,OAAO,mBAAmB,kBAAkB,iBAAkB,QATvB,kBAApC,QAAc,oBAChB,OAAO,mBAAmB,kBAAkB,oBAAqB,aAUpE,QAAO,YAAc,SAEtB,OAAO,WAAa,SAAC,OACpB,GAAA,eAAA,SAAU,QAAQ,QAAQ,MAAM,YAChC,QAAQ,IAAI,IACZ,SAAS,WACR,GAAA,YAAA,MAAO,QAAQ,MACf,QAAQ,IAAI,IAC2B,kBAApC,QAAc,qBAChB,KAAO,OAAO,mBAAmB,OAClC,iBAAiB,SAEnB,OAAO,wBAA0B,SAAC,OACjC,GAAA,eAAA,SAAU,QAAQ,QAAQ,MAAM,YAChC,QAAQ,IAAI","sourcesContent":["angular.module \"ngPasteFrom\", []\n\t.constant \"ngPasteFromErrors\",\n\t\tinvalidColumnLength: \"NGPASTEFROM_INVALID_COLUMN_LENGTH\"\n\t\tfailedValidation: \"NGPASTEFROM_FAILED_VALIDATION\"\n\n\t.directive \"ngPasteFrom\", ->\n\t\trestrict: \"A\"\n\t\tscope: \n\t\t\tngPasteFrom: \"=\"\n\t\t\tngPasteFromFormat: \"=\"\n\t\t\tngPasteFromOnPaste: \"=\"\n\t\t\tngPasteFromOnValidate: \"=\"\n\t\t\tngPasteFromOnError: \"=\"\n\n\t\tlink: ($scope, element, attrs) ->\n\t\t\tif not $scope.ngPasteFromFormat?\n\t\t\t\tconsole.error \"Missing required attribute ngPasteFromFormat.\"\n\n\t\t\telement.on \"paste\", $scope.pasteEvent\n\t\t\telement.on \"keyup\", $scope.clearSourceElementEvent\n\t\t\telement.on \"change\", $scope.clearSourceElementEvent\n\n\t\tcontroller: ($scope, $filter, ngPasteFromErrors, $timeout) ->\n\t\t\tsplitToRows = (data) ->\n\t\t\t\tlineEndingsRegExp = /\\r\\n|\\n\\r|\\n|\\r/g;\n\t\t\t\tlineEnding = \"\\n\"\n\t\t\t\tdata.replace(lineEndingsRegExp, lineEnding).split(lineEnding)\n\n\t\t\tsplitToColumns = (row) ->\n\t\t\t\tseparatorChar = \"\\t\"\n\t\t\t\trow.split separatorChar\n\n\t\t\tcolumnsToObject = (columns) ->\n\t\t\t\tobj = {}\n\t\t\t\tformat = $scope.ngPasteFromFormat\n\t\t\t\tfor column, index in columns\n\t\t\t\t\tobj[format[index]] = column\n\t\t\t\tobj\n\n\t\t\tprocessPasteData = (data) ->\n\t\t\t\tif not (data and data.length)\n\t\t\t\t\treturn\n\n\t\t\t\trows = splitToRows data\n\t\t\t\tresult = []\n\n\t\t\t\tfor row, index in rows\n\t\t\t\t\tcolumns = splitToColumns row\n\n\t\t\t\t\tif columns.length isnt $scope.ngPasteFromFormat.length\n\t\t\t\t\t\tif typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.invalidColumnLength, index\n\t\t\t\t\t\tcontinue\n\n\t\t\t\t\tobj = columnsToObject columns\n\n\t\t\t\t\tif typeof $scope.ngPasteFromOnValidate isnt \"function\" or $scope.ngPasteFromOnValidate obj, index\n\t\t\t\t\t\tresult.push obj\n\t\t\t\t\telse if typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.failedValidation, index\n\n\t\t\t\t$scope.ngPasteFrom = result\n\n\t\t\t$scope.pasteEvent = (event) ->\n\t\t\t\telement = angular.element event.srcElement\n\t\t\t\telement.val \"\"\n\t\t\t\t$timeout ->\n\t\t\t\t\tdata = element.val()\n\t\t\t\t\telement.val \"\"\n\t\t\t\t\tif typeof $scope.ngPasteFromOnPaste is \"function\"\n\t\t\t\t\t\tdata = $scope.ngPasteFromOnPaste data\n\t\t\t\t\tprocessPasteData data\n\n\t\t\t$scope.clearSourceElementEvent = (event) ->\n\t\t\t\telement = angular.element event.srcElement\n\t\t\t\telement.val \"\"\n"],"sourceRoot":"/source/"}