{"version":3,"sources":["ng-paste-from.coffee"],"names":[],"mappings":"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","file":"ng-paste-from-latest.js","sourceRoot":"/source/","sourcesContent":["angular.module \"ngPasteFrom\", []\n\t.constant \"ngPasteFromErrors\",\n\t\tinvalidColumnLength: \"NGPASTEFROM_INVALID_COLUMN_LENGTH\"\n\t\tfailedValidation: \"NGPASTEFROM_FAILED_VALIDATION\"\n\n\t.constant \"ngPasteFromSeparators\",\n\t\trow: /\\r\\n|\\n\\r|\\n|\\r/g\n\t\tcolumn: \"\\t\"\n\n\t.directive \"ngPasteFrom\", ->\n\t\trestrict: \"A\"\n\t\tscope: \n\t\t\tngPasteFrom: \"=\"\n\t\t\tngPasteFromColumns: \"=\"\n\t\t\tngPasteFromRowSeparator: \"=\"\n\t\t\tngPasteFromColumnSeparator: \"=\"\n\t\t\tngPasteFromPasteOnly: \"=\"\n\t\t\tngPasteFromBeforeParse: \"=\"\n\t\t\tngPasteFromAfterParseRow: \"=\"\n\t\t\tngPasteFromOnValidate: \"=\"\n\t\t\tngPasteFromOnSuccessBeforeApply: \"=\"\n\t\t\tngPasteFromOnError: \"=\"\n\n\t\tlink: ($scope, element, attrs) ->\n\t\t\tif not $scope.ngPasteFromColumns?\n\t\t\t\tconsole.error \"Missing required attribute ngPasteFromColumns.\"\n\n\t\t\t$scope.pasteEvent = (event) ->\n\t\t\t\tif event.clipboardData? && event.clipboardData.getData? # Standard\n\t\t\t\t\tdata = event.clipboardData.getData \"text/plain\"\n\t\t\t\telse if event.originalEvent? && event.originalEvent.clipboardData? && event.originalEvent.clipboardData.getData? # jQuery\n\t\t\t\t\tdata = event.originalEvent.clipboardData.getData \"text/plain\"\n\t\t\t\telse if window.clipboardData? && window.clipboardData.getData? # Internet Explorer\n\t\t\t\t\tdata = window.clipboardData.getData \"Text\"\n\n\t\t\t\tif typeof $scope.ngPasteFromBeforeParse is \"function\"\n\t\t\t\t\tdata = $scope.ngPasteFromBeforeParse data\n\t\t\t\t$scope.processPasteData data\n\t\t\t\tif $scope.ngPasteFromPasteOnly ? true\n\t\t\t\t\tevent.preventDefault()\n\n\t\t\t$scope.changeEvent = ->\n\t\t\t\tif $scope.ngPasteFromPasteOnly ? true\n\t\t\t\t\telement.val \"\"\n\t\t\t\telse\n\t\t\t\t\tdata = element.val()\n\t\t\t\t\tif typeof $scope.ngPasteFromBeforeParse is \"function\"\n\t\t\t\t\t\tdata = $scope.ngPasteFromBeforeParse data\n\t\t\t\t\t$scope.processPasteData data\n\n\t\t\telement.on \"paste\", $scope.pasteEvent\n\t\t\telement.on \"keyup\", $scope.changeEvent\n\t\t\telement.on \"change\", $scope.changeEvent\n\n\t\tcontroller: ($scope, $filter, ngPasteFromErrors, ngPasteFromSeparators) ->\n\t\t\t$scope.columnsToObject = (columns) ->\n\t\t\t\tobj = {}\n\t\t\t\tformat = $scope.ngPasteFromColumns\n\t\t\t\tfor column, index in columns\n\t\t\t\t\tobj[format[index]] = column\n\t\t\t\tobj\n\n\t\t\t$scope.getExpectedColumnsLength = ->\n\t\t\t\tif typeof $scope.ngPasteFromColumns is \"number\"\n\t\t\t\t\t$scope.ngPasteFromColumns\n\t\t\t\telse\n\t\t\t\t\t$scope.ngPasteFromColumns.length\n\n\t\t\t$scope.processPasteData = (data) ->\n\t\t\t\tif not (data and data.length)\n\t\t\t\t\treturn\n\n\t\t\t\trows = data.split $scope.ngPasteFromRowSeparator ? ngPasteFromSeparators.row\n\t\t\t\tresult = []\n\t\t\t\texpectedColumnsLength = $scope.getExpectedColumnsLength()\n\n\t\t\t\tfor row, index in rows\n\t\t\t\t\tif row is \"\"\n\t\t\t\t\t\tcontinue\n\n\t\t\t\t\tcolumns = row.split $scope.ngPasteFromColumnSeparator ? ngPasteFromSeparators.column\n\n\t\t\t\t\trowData =\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t\tsource: row\n\t\t\t\t\t\texpectedLength: expectedColumnsLength\n\t\t\t\t\t\tactualLength: columns.length\n\n\t\t\t\t\tif columns.length isnt expectedColumnsLength\n\t\t\t\t\t\tif typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.invalidColumnLength, rowData\n\t\t\t\t\t\tcontinue\n\n\t\t\t\t\tif typeof $scope.ngPasteFromColumns is \"number\"\n\t\t\t\t\t\trowResult = columns\n\t\t\t\t\telse\n\t\t\t\t\t\trowResult = $scope.columnsToObject columns\n\n\t\t\t\t\tif typeof $scope.ngPasteFromOnValidate isnt \"function\" or $scope.ngPasteFromOnValidate rowResult, rowData\n\t\t\t\t\t\tif typeof $scope.ngPasteFromAfterParseRow is \"function\"\n\t\t\t\t\t\t\trowResult = $scope.ngPasteFromAfterParseRow rowResult\n\n\t\t\t\t\t\tresult.push rowResult\n\t\t\t\t\telse if typeof $scope.ngPasteFromOnError is \"function\"\n\t\t\t\t\t\t$scope.ngPasteFromOnError ngPasteFromErrors.failedValidation, rowData\n\n\t\t\t\tif typeof $scope.ngPasteFromOnSuccessBeforeApply is \"function\"\n\t\t\t\t\t$scope.ngPasteFromOnSuccessBeforeApply result\n\n\t\t\t\t$scope.$apply ->\n\t\t\t\t\t$scope.ngPasteFrom = result\n"]}