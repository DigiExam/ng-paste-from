(function(){angular.module("ngPasteFrom",[]).constant("ngPasteFromErrors",{invalidColumnLength:"NGPASTEFROM_INVALID_COLUMN_LENGTH",failedValidation:"NGPASTEFROM_FAILED_VALIDATION"}).directive("ngPasteFrom",function(){return{restrict:"A",scope:{ngPasteFrom:"=",ngPasteFromFormat:"=",ngPasteFromOnPaste:"=",ngPasteFromOnValidate:"=",ngPasteFromOnError:"="},link:function($scope,element){return null==$scope.ngPasteFromFormat&&console.error("Missing required attribute ngPasteFromFormat."),element.on("paste",function(){return element.val(""),$scope.hasPasted=!0}),element.on("keyup",function(){return $scope.hasPasted&&($scope.$apply(function(){return $scope.pasteData=$scope.ngPasteFromOnPaste(element.val())}),$scope.hasPasted=!1),element.val("")})},controller:function($scope,$filter,ngPasteFromErrors){var columnsToObject,defaultOnError,defaultOnPaste,defaultOnValidate,splitToColumns,splitToRows;return defaultOnPaste=function(data){return data},defaultOnError=function(error,index){return console.error("ngPasteFromError: index "+index+" error: "+error)},defaultOnValidate=function(){return!0},null==$scope.ngPasteFromOnPaste&&($scope.ngPasteFromOnPaste=defaultOnPaste),null==$scope.ngPasteFromOnError&&($scope.ngPasteFromOnError=defaultOnError),null==$scope.ngPasteFromOnValidate&&($scope.ngPasteFromOnValidate=defaultOnValidate),splitToRows=function(data){var lineEnding,lineEndingsRegExp;return lineEndingsRegExp=/\r\n|\n\r|\n|\r/g,lineEnding="\n",data.replace(lineEndingsRegExp,lineEnding).split(lineEnding)},splitToColumns=function(row){var separatorChar;return separatorChar="	",row.split(separatorChar)},columnsToObject=function(columns){var column,format,index,obj,_i,_len;for(obj={},format=$scope.ngPasteFromFormat,index=_i=0,_len=columns.length;_len>_i;index=++_i)column=columns[index],obj[format[index]]=column;return obj},$scope.processPasteData=function(data){var columns,index,obj,result,row,rows,_i,_len;for(rows=splitToRows(data),result=[],index=_i=0,_len=rows.length;_len>_i;index=++_i)row=rows[index],columns=splitToColumns(row),columns.length===$scope.ngPasteFromFormat.length?(obj=columnsToObject(columns),$scope.ngPasteFromOnValidate(obj,index)?result.push(obj):$scope.ngPasteFromOnError(ngPasteFromErrors.failedValidation,index)):$scope.ngPasteFromOnError(ngPasteFromErrors.invalidColumnLength,index);return $scope.ngPasteFrom=result},$scope.$watch("pasteData",function(){return null!=$scope.pasteData&&0<$scope.pasteData.length?($scope.processPasteData($scope.pasteData),$scope.pasteData=null):void 0})}}})}).call(this);
//# sourceMappingURL=ng-paste-from-latest.min.js.map